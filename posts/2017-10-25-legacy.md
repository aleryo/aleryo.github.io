---
title: Ils ne savaient pas que c’était impossible...
author: Aleryo
---

# Votre mission, si vous l'acceptez…

## L'agence tous risques

Tout commence comme un banal appel d'offres pour la reprise en tierce maintenance applicative d'une application d'un éditeur dans le domaine de la finance : le client cherche une équipe avec un PO, un testeur, 1 développeur sénior et 2 juniors. L'application a une dizaine d'années, deux versions sont en production chez des clients et une nouvelle est en cours de développement pour livraison fin d'année, avec une pression importante de la direction pour démontrer une capacité à faire.

Le client a en interne une équipe d'une dizaine de personnes mais cela ne semble pas suffire pour à la fois gérer la maintenance corrective et évolutive, et à la fois développer la nouvelle version d'où le besoin de "renforts". Le client est prêt à travailler avec une équipe située en dehors de ses locaux mais cela n'a rien de très surprenant dans un contrat de TMA : combien de TMA sont elles délocalisées en province ou dans des pays à bas salaires ?

Bref, rien de très excitant...  Mais nous avons un bon contact avec le client, des liens tissés depuis quelques années au travers de plusieurs collaborations, le budget est confortable et nous avons envie d'avancer. Nous faisons donc une contre-proposition : pour le même budget, au lieu d'une équipe pyramidale de 5-6 personnes organisée comme un mini centre de services, nous proposons une équipe répartie auto-organisée de 4 craftspersons expérimentées:

* tous les membres de l'équipe seront des développeurs ou développeuses **chevronnées**, compétentes techniquement mais aussi capables de prendre en main l'organisation et de parler le langage du client ;
* il n'y aura **pas de chef** identifié dans l'équipe ;
* les membres de l'équipe travailleront depuis le lieu de leur choix, **à distance**, ce qui nous permettra de réunir des personnes se connaissant bien et ayant la même vision du travail, où qu'elles se trouvent ;
* l'équipe mettra en oeuvre les pratiques et principes de l'[**eXtreme Programming**](http://extremeprogramming.org), développement dirigé par les tests, intégration continue, boucles de rétroactions courtes, priorisation par la valeur métier…

Après discussion rapide, le client est séduit par la proposition, accepte l'offre et organise un premier rendez-vous afin de nous présenter l'application et l'équipe.

## Mission: Impossible

L'application est structurée en deux composants disjoints : un backend organisé selon le schéma des [pipes and filters](http://www.enterpriseintegrationpatterns.com/patterns/messaging/PipesAndFilters.html) et un frontend de type application web. Entre les deux se trouve une base de données relationnelle d'un éditeur bien connu qui sert de mémoire partagée persistante entre les deux composants.

Première surprise : le backend est codé dans un langage propriétaire multi-paradigmes, à la fois orienté-objets, fonctionnel et même logique, compilé[^1] vers du C++. Au dessus de ce langage socle, l'équipe a développé un autre langage propriétaire, syntaxiquement structuré comme un langage à balises, dans lequel sont codés les processus métiers.

Deuxième surprise : le frontend est certes codé en Java/Javascript/HTML dans une classique _webapp_ JEE, mais il est structuré par un _framework_ maison dont le but est de décrire le flux d'interaction des utilisateurs sous la forme de processus, des graphes dirigés reliant des pages, des requêtes SQL, des traitements...

Troisième surprise (qui n'en est pas vraiment une) : il n'y a aucun test unitaire et très peu de tests automatisés qui couvrent globalement peu de fonctionnalités de l'appplication et uniquement dans le backend. Quelques efforts d'automatisation de tests sur le front ont été entrepris mais ils sont encore balbutiants et ne font pas partie du processus standard de développement.

Nous nous retrouvons donc devant une base de code relativement conséquente, séparée en deux parties développées de manière indépendantes mais fortement couplés par une base de données dont le schéma se complexifie, sans tests, et avec une qualité d'écriture de code plutôt médiocre voire par endroits calamiteuses : copier-coller à outrance, règles de nommages incohérentes, couplage fort entre composants, fonctions et expressions complexes sur plusieurs dizaines de lignes, commentaires obsolètes voire contradictoires...

L'équipe suit un processus de développement à la Scrum : stand-up meeting tous les matins, tableaux d'avancement des "user stories", gestion d'icelles dans Jira, sprints de 2 semaines...

[^1]: Nous découvrirons rapidement que le compilateur ne supporte que le 32 bits et qu'un portage vers du 64 bits demanderait un effort conséquent
